import sys
from PyQt5.QtWidgets import QApplication, QDesktopWidget, QMainWindow, QGridLayout, QLabel, QLineEdit, QPushButton, QVBoxLayout, QWidget, QCalendarWidget, QComboBox
from PyQt5.QtGui import QPixmap, QIcon, QPalette, QColor
from PyQt5 import QtCore
from PyQt5.QtCore import Qt 

from datetime import datetime
# from claseEmpresa import Empresa
import validaciones as val
import Utilities as util
from ClasePersonas import Administrador, Usuarios, Personas
from ClaseAlquileres import Alquiler
from ClaseReservas import Reserva
from ClaseVehiculos import Vehiculos
import hashlib

class Ventana(QWidget):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("Operaci贸n realizada")
        self.setMinimumSize(600,600)
        self.center()
        self.initUI()

        self.idres=Reserva.cantReservas

    def initUI(self):
        layout = QVBoxLayout()

        # Label
        label_aviso = QLabel("Su operaci贸n fue realizada exitosamente!")
        label_aviso.setStyleSheet("color: green")
        layout.addWidget(label_aviso)

        self.button2 = QPushButton("Volver al Inicio")
        self.button2.clicked.connect(self.Volver)
        layout.addWidget(self.button2)

        self.setLayout(layout)
        with open('Estilo.qss', 'r') as est:
            style = est.read()
            self.setStyleSheet(style)        
        self.show()
    
    def center(self):
        screen_geometry = QDesktopWidget().availableGeometry()
        window_geometry = self.geometry()

        center_point = screen_geometry.center()

        new_x = int(center_point.x() - window_geometry.width() / 2)
        new_y = int(center_point.y() - window_geometry.height() / 2)
        self.move(new_x, new_y)

    def Volver(self):
        self.close()
        self.window = ReservaRealizadaUsuario(self.idres)
        self.window.show()

class ReservaRealizadaUsuario(QWidget):
    def __init__(self, idres):
        super().__init__()
        self.setWindowTitle("Operaci贸n realizada")
        self.setMinimumSize(600,600)
        self.idres=idres
        self.center()
        self.initUI()
        

    def initUI(self):
        layout = QVBoxLayout()

        # Label
        label_aviso = QLabel("Su operaci贸n fue realizada exitosamente!")
        label_aviso.setStyleSheet("color: green")
        layout.addWidget(label_aviso)

        label_idres = QLabel(f"El id de su reserva es {self.idres}")
        label_idres.setStyleSheet("color: green")
        layout.addWidget(label_idres)

        self.button2 = QPushButton("Volver al Inicio")
        self.button2.clicked.connect(self.Volver)
        layout.addWidget(self.button2)

        self.setLayout(layout)
        with open('Estilo.qss', 'r') as est:
            style = est.read()
            self.setStyleSheet(style)        
        self.show()
    
    def center(self):
        screen_geometry = QDesktopWidget().availableGeometry()
        window_geometry = self.geometry()

        center_point = screen_geometry.center()

        new_x = int(center_point.x() - window_geometry.width() / 2)
        new_y = int(center_point.y() - window_geometry.height() / 2)
        self.move(new_x, new_y)

    def Volver(self, ventana):
        self.close()
        
    


if __name__ == '__main__':
    app = QApplication(sys.argv)
    main_window = Ventana()
    main_window.show()
    sys.exit(app.exec_())